// Pico lightweight version
@use "../../node_modules/@picocss/pico/scss/pico" with (
  $enable-semantic-container: true,
  $enable-classes: true,
  $theme-color: "cyan",
  $modules: (
    "content/code": false,
    "forms/input-color": false,
    "forms/input-date": true,
    "forms/input-file": false,
    "forms/input-range": false,
    "forms/input-search": false,
    "components/progress": false,
    "components/dropdown": true,
    "utilities/reduce-motion": false
  )
)
@import "../../profiles/theme-base10/resources/css/palette-teal.css"

// ============================================================================
// SASS Mixins
// ============================================================================
@mixin icon-size($size: 1.5rem)
    width: $size
    height: $size

@mixin dark-mode-theme()
    --pico-color: var(--jinks-colors-light)
    --pico-primary: var(--jinks-colors-light)
    --pico-primary-background: var(--jinks-colors-700)
    --pico-primary-hover-background: var(--jinks-colors-400)
    --pico-secondary-background: var(--jinks-colors-500)
    --pico-secondary-hover-background: var(--jinks-colors-300)
    --pico-muted-color: var(--jinks-colors-500)
    --pico-muted-border-color: var(--jinks-colors-600)
    --pico-form-element-invalid-border-color: var(--jinks-colors-accent)
    --pico-form-element-invalid-focus-color: var(--jinks-colors-accent)
    --pico-form-element-valid-border-color: var(--jinks-colors-500)
    --pico-form-element-valid-focus-color: var(--jinks-colors-500)
    --pico-ins-color: var(--jinks-colors-500)
    --color-resolved: var(--jinks-colors-dark)
    --pico-h3-color: var(--jinks-colors-light)
    --jinks-tabs-color: var(--jinks-colors-100)
    --pico-del-color: var(--jinks-colors-200)
    --color-border-light: var(--jinks-colors-dark)
    --color-success: var(--jinks-colors-500)
    --color-alert: var(--jinks-colors-accent)
    --jinks-menubar-background-color: var(--jinks-colors-500)
    --jinks-menubar-color: var(--jinks-colors-light)

    .fixed-layout >.before:not(:empty),
    .fixed-layout >.before-top:not(:empty)
        background-color: var(--jinks-colors-600)
    
    .color-scheme-option
        background-color: var(--jinks-colors-dark)

        &[data-selected="true"]
            background-color: var(--jinks-colors-200)

            label
                color: var(--jinks-colors-dark)

// ============================================================================
// Color Scheme Styles
// ============================================================================
[data-theme=light],
:root:not(:has([data-theme=dark])),
:host:not(:has([data-theme=dark]))
    --pico-primary-background: var(--jinks-colors-700)
    --pico-primary-hover-background: var(--jinks-colors-400)
    --pico-secondary-background: var(--jinks-colors-500)
    --pico-secondary-hover-background: var(--jinks-colors-300)
    --pico-muted-color: var(--jinks-colors-500)
    --pico-muted-border-color: var(--jinks-colors-600)
    --jinks-menubar-background-color: var(--jinks-colors-500)
    --jinks-menubar-color: var(--jinks-colors-light)
    --jinks-tabs-color: var(--jinks-colors-700)

    --pico-header-background: var(--jinks-menubar-background-color)
    --text-dark: var(--jinks-colors-50)
    --color-border-light: var(--jinks-colors-dark)
    --color-success: var(--jinks-colors-500)
    --color-alert: var(--jinks-colors-accent)

    --pico-form-element-invalid-border-color: var(--jinks-colors-accent)
    --pico-form-element-invalid-focus-color: var(--jinks-colors-accent)
    --pico-form-element-valid-border-color: var(--jinks-colors-500)
    --pico-form-element-valid-focus-color: var(--jinks-colors-500)
    --pico-ins-color: var(--jinks-colors-500)
    --color-resolved: var(--jinks-colors-dark)
    

@media only screen and (prefers-color-scheme: dark)
    :root:not(:has([data-theme])),
    :host:not(:has([data-theme]))
        @include dark-mode-theme()

/* Dark color scheme (Forced) */
/* Enabled if forced with data-theme="dark" */
[data-theme="dark"]
    @include dark-mode-theme()

// ============================================================================
// CSS Custom Properties
// ============================================================================
:root
    --jinks-layout-before-width: min(30vw, 192px)
    --jinks-layout-after-width: 40vw
    --jinks-logo-light: url("../images/tei-publisher-logo-contrast-color.svg")
    --jinks-logo-image-width: 140px
    --jinks-logo-image-height: 48px
    --font-family: 'Inter', sans-serif
    --font-size: 16px

// ============================================================================
// Tab Navigation Styles
// ============================================================================
.tabs
    margin-top: .5rem
    ul
        display: flex
        list-style: none
        margin: 0
        padding: 0
        
        li
            margin: 0
            border-bottom: 2px solid transparent
            
            a
                display: block
                padding: 0.75rem 1.5rem
                text-decoration: none
                transition: all 0.2s ease
                color: var(--jinks-tabs-color)

                &:hover
                    color: var(--jinks-colors-accent)

        li:has(a.active)
            border-bottom: 2px solid var(--jinks-colors-accent)

// ============================================================================
// Base Typography & Layout
// ============================================================================
html
    font-size: var(--font-size)

:host
    font-family: var(--font-family)
    font-size: var(--font-size)
    background-color: var(--pico-background-color)
body
    min-height: 100vh
    background-color: var(--pico-background-color)
    color: var(--pico-color)

h1, h2, h3, .output > label
    font-family: var(--font-family)
    font-weight: 200

.content-top h3,
.after-top h3
    padding: var(--pico-spacing)
    font-size: 1rem
    font-weight: 600
    margin: 0

p
    margin-top: 0

button:has(svg + span),
button:has(span + svg)
    display: flex
    align-items: center
    column-gap: 0.5rem
    /* Card_shadow */
    box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.10)

// ============================================================================
// Header & Navigation
// ============================================================================
.fixed-layout
    grid-template-areas: "header header header" "before-top content-top after-top" "before content after" "before footer footer"

.page-header
    padding-block-start: 0
    background-image: var(--jinks-header-background-image)
    background-size: cover
    background-repeat: no-repeat
    background-position: top
    background-color: var(--jinks-menubar-background-color)
    padding-inline: var(--s0)

.logo
    background-image: var(--jinks-logo-light)
    background-repeat: no-repeat
    background-size: 100% 100%
    background-position: left center
    width: var(--jinks-logo-image-width)
    height: var(--jinks-logo-image-height)
    margin-right: var(--jinks-logo-margin-right)
    cursor: pointer

.logo a
    display: block
    width: 100%
    height: 100%
    opacity: 0

.page-header
    --pico-nav-element-spacing-vertical: 0
    --pico-primary: var(--text-dark)
    --pico-primary-hover: var(--text-dark)
    --pb-login-link-color: var(--text-dark)
    --pico-accordion-close-summary-color: var(--text-dark)

header nav
    padding-left: .5rem
    padding-right: .5rem

header nav svg
    @include icon-size(1.5rem)

nav details
    --pico-form-element-background-color: var(--jinks-menubar-background-color)
    --pico-form-element-border-color: var(--jinks-menubar-background-color)
    --pico-form-element-focus-color: var(--jinks-menubar-background-color)
    --pico-form-element-placeholder-color: var(--pico-primary)
    --pico-form-element-active-background-color: var(--jinks-menubar-background-color)
    --pico-form-element-active-border-color: var(--jinks-menubar-background-color)

nav ul
    &:last-of-type
        margin-right: 0
    &:first-of-type
        margin-left: 0

nav li button,
nav li select
    padding: var(--pico-form-element-spacing-vertical) var(--pico-form-element-spacing-horizontal)

footer
    background-color: var(--jinks-colors-200)
    box-shadow: 0 -2px 8px 0 rgba(0,0,0,0.04), 0 2px 10px 0 rgba(0,0,0,0.12)

// ============================================================================
// Login Component
// ============================================================================
pb-login [role="button"]
    margin: 0
    background-color: transparent
    border: none

:host(pb-login) > a
    display: flex
    align-items: center
    justify-content: center
    border-radius: 81px
    width: 36px
    height: 36px
    padding: 0
    color: var(--text-dark)
    background-color: var(--jinks-menubar-background-color)
    font-size: var(--jinks-menubar-font-size)
    text-decoration: none

pb-login::part(label)
    display: none

// ============================================================================
// Editor & Forms
// ============================================================================
.fixed-layout > main.editor
    padding: 1rem calc(var(--pico-spacing) + 2rem)
    display: grid
    grid-template-columns: 60% 40%
    grid-template-areas: "form json"
    grid-column-gap: 2rem

.fixed-layout > main:has(.templating)
    display: block
    padding: 1rem var(--pico-spacing)

.templating
    display: grid
    grid-template-columns: 1fr minmax(220px, 480px)
    column-gap: 1rem

fieldset legend
    font-weight: bold

fieldset ul
    list-style: none
    padding: 0
    margin: 0

fieldset ul li
    display: flex
    justify-content: flex-start
    align-items: center
    column-gap: 1rem

fieldset ul li label
    margin: 0

[data-tab="profiles"] fieldset div
    margin-bottom: 1.5rem

[data-tab="profiles"] fieldset div h4
    font-size: 1rem
    font-weight: normal
    font-style: italic
    color: var(--jinks-colors-accent)
    margin-bottom: .5rem

label small
    vertical-align: top
    margin-left: .25rem
    color: var(--jinks-colors-300)

dialog footer button
    padding: var(--pico-form-element-spacing-vertical) var(--pico-form-element-spacing-horizontal)
    margin: 0

#eval
    min-width: fit-content

#configEditor
    grid-area: json

#appConfig
    height: 80vh

form
    grid-area: form

// ============================================================================
// Output & Content
// ============================================================================
pb-dialog h3
    margin-bottom: 0

:host(pb-dialog) > dialog > article > header
    margin-bottom: 0

:host(pb-dialog) > dialog > article
    display: grid
    grid-template-rows: auto 1fr auto
    overflow: hidden

:host(pb-dialog[wide]) dialog article
    min-width: 80vw

:host(pb-dialog) > dialog > article > footer
    display: flex
    justify-content: space-between
    align-items: center
    gap: 1rem

pb-dialog > nav
    width: 100%

#output
    overflow: auto
.output
    overflow: auto
    margin-top: var(--pico-spacing)
    padding: 0
    line-height: 2

.output > label
    color: var(--jinks-colors-highlight)

.output li jinn-monaco-diff
    height: 40vh
    margin-top: 1rem

.output li a
    padding-left: .25rem

.output .action
    width: 24px
    display: inline-block

ul.output li
    list-style: none
    margin-top: 1rem

.source
    padding-left: 1rem

jinn-monaco-editor
    max-height: 80vh
    min-height: 460px
    font-size: 1rem

// ============================================================================
// Tables
// ============================================================================
.templating table th, .templating table td
    text-align: left
    border-bottom: 1px solid var(--color-border-light)

.templating table td:nth-child(1), .templating table th:nth-child(1)
    width: 40%

// ============================================================================
// Interactive Elements
// ============================================================================
summary
    width: fit-content

details
    margin-top: 1rem

details pb-markdown
    margin-top: 1rem

[slot=toolbar]
    display: flex
    margin-bottom: 4px
    --pico-spacing: 0

[data-tooltip]:not(a,button,input,[role=button])
    border-bottom: none

// ============================================================================
// Utility Classes
// ============================================================================
.hidden
    display: none

.badge
    display: inline-block
    padding: 0.25em 0.5em
    border-radius: 0.25em
    background-color: var(--color-success)
    color: var(--text-dark)
    font-size: 0.875rem
    font-weight: bold

.alert
    background-color: var(--color-alert)
    color: var(--text-dark)

.resolved
    background-color: var(--color-resolved)
    color: var(--text-dark)

.error
    color: var(--color-alert)

.icon,
:host(pb-login) > a svg
    @include icon-size(1.5rem)

// ============================================================================
// Installed Components
// ============================================================================
.apps-aside
    display: flex
    flex-direction: column
    align-items: center
    padding: .5rem
    overflow: auto

.installed
    display: flex
    flex-direction: column
    align-items: center
    padding-left: 0
    max-width: 100%
    overflow: auto
    column-gap: 1rem
    justify-content: flex-start

.installed li
    display: flex
    column-gap: .5rem
    transition: all 0.2s ease

.installed li > div
    padding-top: .5rem
    cursor: pointer
    transition: all 0.2s ease

.installed li.selected
    border: 1px solid var(--jinks-colors-300)
    border-radius: .75rem

.installed li.selected > div
    color: var(--pico-primary)

.installed .actions
    display: flex
    flex-direction: column

.installed .action svg
    @include icon-size(1rem)

.installed:empty
    padding: 0

.installed h3
    font-size: .875rem
    text-align: center
    margin-bottom: 0

.installed img, .installed li > label
    display: block
    margin: 0 auto

.installed img
    width: 64px
    margin-bottom: .5rem

button[type="reset"]
    width: calc(100%)
    background-color: var(--pico-muted-color)
    border-color: var(--pico-muted-border-color)

// ============================================================================
// Messages & Errors
// ============================================================================
#errorMsg
    color: red
    font-size: 1.2em
    margin: 10px 0

#mergedConfig pre
    min-height: 100px

// ============================================================================
// Color Scheme Picker
// ============================================================================
.color-scheme-picker
    display: grid
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr))
    gap: 1rem
    margin-top: 1rem

.color-scheme-option
    border: 2px solid var(--jinks-colors-accent)
    border-radius: var(--pico-border-radius)
    padding: .25rem .5rem
    cursor: pointer
    transition: all 0.2s ease, transform 0.1s ease
    background: var(--jinks-colors-light)

    &:hover
        border-color: var(--jinks-colors-highlight)
        box-shadow: 0 0 0 1px var(--pico-primary)

    &[data-selected="true"]
        border-color: var(--jinks-colors-accent)
        background: var(--jinks-colors-100)
        box-shadow: 0 0 0 1px var(--pico-primary)

    label
        display: flex
        align-items: center
        gap: 0.5rem
        margin: 0
        cursor: pointer
        font-weight: 500

        input[type="radio"]
            margin: 0

.color-preview
    display: flex
    gap: 2px
    margin-bottom: 0.5rem
    overflow: hidden

.color-swatch
    flex: 1
    height: 24px
    min-width: 0

@media (max-width: 768px)
    .color-scheme-picker
        grid-template-columns: 1fr
        gap: 0.75rem

    .color-scheme-option
        padding: 0.75rem

    .color-swatch
        height: 20px

/* Documentation styles */

pb-code-highlight
    margin-bottom: 1rem

jinks-file-manager
    --jinks-file-manager-bg-secondary: var(--jinks-colors-50)
    height: calc(100vh - 220px)