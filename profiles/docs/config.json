{
    "$schema": "../../schema/jinks.json",
    "type": "blueprint",
    "id": "https://e-editiones.org/app/tei-publisher/tei-publisher-docs",
    "label": "Documentation + Demo",
    "description": "TEI Publisher documentation and demo",
    "version": "1.0.0",
    "order": 103,
    "defaults": {
        "data-default": ""
    },
    "data": {
        "landing": "landing/home.xml"
    },
    "depends": [
        "base10",
        "docbook",
        "jats",
        "markdown",
        "iiif",
        "playground",
        "docx",
        "demo-data",
        "landing-page"
    ],
    "pkg": {
        "abbrev": "tei-publisher-docs"
    },
    "features": {
        "browse": {
            "read-only": false
        },
        "upload": {
            "enabled": true,
            "target": "demo"
        }
    },
    "collection-config": {
        "doc": {
            "odd": "docbook.odd",
            "template": "documentation.html"
        },
        "demo": {
            "template": "basic.html"
        },
        "jats": {
            "odd": "jats.odd",
            "template": "jats.html"
        },
        "docx": {
            "odd": "docx-output.odd",
            "template": "docx.html"
        }
    },
    "menu": {
        "$replace": true,
        "items": [
            {
                "id": "Start",
                "url": "browse.html"
            },
            {
                "id": "documentation",
                "url": "browse.html?collection=doc"
            },
            {
                "id": "news",
                "url": "https://www.e-editiones.org/tags/release"
            }
        ],
        "delete": true,
        "login": true,
        "search": true,
        "dark-mode": true,
		"language": true,
		"download": true
    },
    "generator": {
        "templates": {
            "config-odd-available": "xmldb:get-child-resources($config:odd-root)[ends-with(., '.odd')][not(. = ('teipublisher_odds.odd', 'teilite.odd'))]"
        }
    },
    "api": [
        {
            "id": "http://teipublisher.com/api/documentation-and-demo",
            "path": "docs-api.xql",
            "spec": "docs-api.json",
            "prefix": "demo"
        }
    ],
    "static": {
        "templating": {
            "use": [
                "templates/iiif-blocks.html"
            ]
        },
        "collections": {
            "doc": {
                "path-prefix": "",
                "index": false,
                "template": "static/templates/index.html",
                "paginate": {
                    "template": "static/templates/documentation.html",
                    "toc": true,
                    "parts": [
                        {
                            "odd": "docbook.odd"
                        },
                        {
                            "id": "breadcrumb",
                            "user.mode": "breadcrumb",
                            "odd": "docbook.odd"
                        }
                    ]
                }
            },
            "demo": {
                "path-prefix": "",
                "index": false,
                "include": ["demo/F-rom.xml"],
                "template": "static/templates/index.html",
                "fetch": [
                    {
                        "url": "[[$context?base-uri]]/api/iiif/[[$doc?path]]",
                        "target": "[[$doc?path]]/manifest.json"
                    }
                ],
                "paginate": {
                    "template": "static/templates/facsimile.html",
                    "toc": false,
                    "parts": [
                        {
                            "id": "default",
                            "view": "page",
                            "odd": "shakespeare.odd"
                        },
                        {
                            "id": "breadcrumb",
                            "user.mode": "breadcrumb",
                            "view": "single"
                        }
                    ]
                }
            }
        },
        "styles": [
            "resources/css/static.css",
            "transform/docbook.css"
        ],
        "fields": {
            "index": ["content"],
            "store": ["content", "title", "link"]
        },
        "copy": [
            {
                "from": "data/doc",
                "to": "images",
                "filter": "\\.(?:png|jpg|jpeg|gif|svg)$"
            }
        ]
    }
}
